<!DOCTYPE html>
<html lang="en" theme="dark">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/assets/sextant-56e9d699.png" />
  <title>Celestial Navigation</title>
  <link rel="stylesheet" type="text/css" href="pyscript/pyscript.css" />
  
  
  <style>
    @media (prefers-color-scheme: dark) {
      body {
        color: whitesmoke;
        background-color: black;
      }
    }

    body {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      margin: 0;
      padding: 0;
      color: whitesmoke;
      background-color: black;
    }

    a:link {
      color: rgb(98, 219, 254);
    }

    a:visited {
      color: rgb(98, 219, 254)
    }

    a:hover {
      color: rgb(0, 200, 255);
    }

    a:active {
      color: rgb(225, 248, 255);
    }

    #canvas {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      overflow: hidden;
      background-color: black;
    }

    #page {
      display: none;
    }

    .topbtn {
      background-color: rgb(var(--base-0));
    }

    .topbtn:hover {
      background-color: rgb(var(--accent-1));
    }
  </style>
  <script type="module" crossorigin src="/assets/index-999dd8fa.js"></script>
  <link rel="stylesheet" href="/assets/index-edb88df4.css">
</head>

<body>
  <canvas id="canvas"></canvas>
  <kor-page id="page">
    <kor-app-bar slot="top" style="background:transparent;">
        <kor-button icon="menu" color="tertiary" class="topbtn" onclick="document.querySelector('#menu').visible = true"></kor-button>
        <kor-button label="Observer" icon="anchor" color="tertiary" class="topbtn" onclick="document.querySelector('#form1').visible = true"></kor-button>
        <kor-button label="Sights" icon="auto_awesome" color="tertiary" class="topbtn" onclick="document.querySelector('#form2').visible = true"></kor-button>
        <kor-button label="Location fix" icon="architecture" color="tertiary" class="topbtn" onclick="document.querySelector('#form5').visible = true"></kor-button>
        <kor-button label="Examples" icon="explore" color="tertiary" class="topbtn" onclick="document.querySelector('#form6').visible = true"></kor-button>
        <kor-button label="Info" icon="help_outline" color="tertiary" class="topbtn" onclick="document.querySelector('#form7').visible = true"></kor-button>
    </kor-app-bar>
</kor-page>
<kor-drawer id="menu" width="20%">
    <kor-toggle id="latlongrid" label="Lat/Lon Grid" tabindex="0"></kor-toggle>
    <kor-toggle id="constellations" label="Constellations" active tabindex="0"></kor-toggle>
    <kor-slider id="waterslide" label="Water Opacity" value="0.666" min="0" max="1" step="0.001" input no-clear tabindex="0"></kor-slider>
    <kor-slider id="skyrotation" label="Sky Rotation" value="0" min="0" max="360" step="0.1" input no-clear tabindex="0"></kor-slider>
    Shortcuts<br />
    l / L: toggle lat/lon grid<br />
    c / C: toggle constellations<br />
    w / W: water opacity +/-<br />
    r / R: rotate sky +0.1&deg; / +1&deg;<br />
    t / T: rotate sky -0.1&deg; / -1&deg;<br />
    <kor-button id="reset" icon="delete_sweep" tabindex="0">Reset forms</kor-button>
</kor-drawer>
  <div id="container" style="display: none;">
    <kor-modal id="form1" label="Observation data" height="80%">
    <kor-grid columns="2" spacing="l">
        <b grid-rows="3">Observation method</b>
        <kor-input id="obs-method" value="sextant" type="select" no-clear tabindex="0" grid-rows="3">
            <kor-menu-item label="sextant" active></kor-menu-item>
            <kor-menu-item label="bubble sextant"></kor-menu-item>
            <kor-menu-item label="theodolite"></kor-menu-item>
            <kor-menu-item label="cellphone"></kor-menu-item>
        </kor-input>
        <b grid-rows="3">Date</b>
        <kor-input id="obs-date" type="date" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Timezone</b>
        <kor-slider id="obs-timezone" label="GMT" min="-12" max="12" value="0" step="1" input no-clear tabindex="0" grid-rows="3"></kor-slider>
        <b grid-rows="3">Watch Error</b>
        <kor-input id="obs-watcherr" label="seconds" type="number" value="0" min="-3600" max="3600" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Index Error</b>
        <kor-input id="obs-indexerr" label="minutes" type="number" value="0" min="-60" max="60" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Eye Height</b>
        <kor-input id="obs-height" label="meter" type="number" value="0" min="0" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Pressure</b>
        <kor-input id="obs-pressure" label="millibar" type="number" value="1010" min="0" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Temperature</b>
        <kor-input id="obs-temp" label="Celsius" type="number" value="10" min="-273.15" max="5600" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Speed</b>
        <kor-input id="obs-speed" label="knots" type="number" value="0" min="0" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Bearing</b>
        <degree-input id="obs-bearing" min="-360" max="360" grid-rows="3"></degree-input>
        <b grid-rows="3">Ded. Reckoning Latitude</b>
        <degree-input id="obs-drlat" min="-90" max="90" grid-rows="3"></degree-input>
        <b grid-rows="3">Ded. Reckoning Longitude</b>
        <degree-input id="obs-drlon" min="-180" max="180" grid-rows="3"></degree-input>
        <b grid-rows="3">Actual Position</b>
        <kor-toggle id="obs-actpos" label="Actual Position Is Known" grid-rows="3"></kor-toggle>
        <b grid-rows="3">Actual Latitude</b>
        <degree-input disabled id="obs-actlat" min="-90" max="90" grid-rows="3"></degree-input>
        <b grid-rows="3">Actual Longitude</b>
        <degree-input disabled id="obs-actlon" min="-180" max="180" grid-rows="3"></degree-input>
    </kor-grid>
    <kor-button slot="footer" color="primary" label="Next" icon="east" tabindex="0" onclick="document.querySelector('#form1').visible = false;document.querySelector('#form2').visible = true;"></kor-button>
    <kor-tooltip target="#obs-method" position="right">
        <kor-text size="body-2">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            Dip correction depends on the observation method.<br />
            sextant: stanard dip correction<br />
            bubble sextant: half of the measured altitude with index error<br />
            theodolite: 90&deg; minus zenith angle measurement<br />
            cellphone: no dip correction
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-indexerr" position="right">
        <kor-text size="body-2" grid-cols="2" grid-rows="3">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            Index Error will be added to the altitude.<br />
            Positive if IE is OFF the arc, negative if IE is ON the arc.
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-watcherr" position="right">
        <kor-text size="body-2" grid-cols="2" grid-rows="3">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            Watch Error will be added to Watch Time.<br />
            Positive if watch is behind current time, negative if ahead of current time.
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-speed" position="right">
        <kor-text size="body-2" color="#d22" grid-cols="2"><kor-icon icon="warning" size="s" color="#d22"></kor-icon>Running fix not implemented yet.</kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-bearing" position="right">
        <kor-text size="body-2" grid-cols="2" grid-rows="3">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            All degree type fields accept decimal values.<br />
            The separator between degrees, minutes and seconds can be any non-numeric character.
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-drlat" position="right">
        <kor-text size="body-2" grid-cols="2" grid-rows="3">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            All degree type fields accept decimal values.<br />
            The separator between degrees, minutes and seconds can be any non-numeric character.
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-drlon" position="right">
        <kor-text size="body-2" grid-cols="2" grid-rows="3">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            All degree type fields accept decimal values.<br />
            The separator between degrees, minutes and seconds can be any non-numeric character.
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#obs-actpos" position="right">
        <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>If the actual position of the
        observer is known, then the distance between it and the location fix will be calculated as the last step.
    </kor-tooltip>
</kor-modal>
    <kor-modal id="form2" label="Sight Altitudes" height="80%">
    <kor-grid columns="2" spacing="l">
        <kor-text size="header-1" grid-cols="2" grid-rows="3">
            Celestial bodies
            <kor-icon icon="star"></kor-icon>
            <kor-icon icon="language"></kor-icon>
            <kor-icon icon="nights_stay"></kor-icon>
            <kor-icon icon="wb_sunny"></kor-icon>
        </kor-text>
        <b grid-rows="3">Name</b>
        <kor-input id="star-name" type="select" no-clear tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Local Time</b>
        <time-input id="star-time" grid-rows="3"></time-input>
        <b grid-rows="3">Sextant Altitude</b>
        <degree-input id="star-altitude" min="0" max="90" grid-rows="3"></degree-input>
        <p grid-cols="2" grid-rows="3"><kor-button id="add-star" icon="add_circle" tabindex="0">Add sight to the list</kor-button></p>
        <kor-table id="obs-stars" condensed style="width: 100%" grid-cols="2" grid-rows="12">
            <kor-table-row slot="header">
                <kor-table-cell head grid-cols="7">Celestial body</kor-table-cell>
                <kor-table-cell head grid-cols="7">Altitude</kor-table-cell>
                <kor-table-cell head grid-cols="7">Time</kor-table-cell>
                <kor-table-cell head grid-cols="3">&nbsp;</kor-table-cell>
            </kor-table-row>
        </kor-table>
        <kor-text size="header-1" grid-cols="2" grid-rows="3">Distance From Landmarks<kor-icon icon="landscape"></kor-icon></kor-text>
        <b grid-rows="3">Landmark name</b>
        <kor-input id="land-name" type="text" label="Landmark name" value="" tabindex="0" grid-rows="3"></kor-input>
        <b grid-rows="3">Landmark latitude</b>
        <degree-input id="land-lat" min="-90" max="90" grid-rows="3"></degree-input>
        <b grid-rows="3">Landmark longitude</b>
        <degree-input id="land-lon" min="-180" max="180" grid-rows="3"></degree-input>
        <b grid-rows="3">Approximate Distance</b>
        <kor-input id="land-dist" type="number" label="kilometers" value="1500" min="1" no-clear tabindex="0" grid-rows="3"></kor-input>
        <p grid-cols="2" grid-rows="3"><kor-button id="add-landmark" label="Add Landmark" tabindex="0"></kor-button></p>
        <kor-table id="obs-landmarks" condensed style="width: 100%" grid-cols="2" grid-rows="10">
            <kor-table-row slot="header">
                <kor-table-cell head grid-cols="5">Name</kor-table-cell>
                <kor-table-cell head grid-cols="6">Latitude</kor-table-cell>
                <kor-table-cell head grid-cols="6">Longitude</kor-table-cell>
                <kor-table-cell head grid-cols="4">Distance</kor-table-cell>
                <kor-table-cell head grid-cols="3">&nbsp;</kor-table-cell>
            </kor-table-row>
        </kor-table>
    </kor-grid>
    <kor-button slot="footer" color="primary" label="Previous" icon="west" tabindex="0" onclick="document.querySelector('#form2').visible = false;document.querySelector('#form1').visible = true;"></kor-button>
    <kor-button id="calc-fix" slot="footer" icon="add_location" tabindex="0">Calculate location fix</kor-button>
    <kor-tooltip target="#star-altitude" position="right">
        <kor-text size="body-2">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            All degree type field accepts decimal values.<br />
            The separator between degrees, minutes and seconds can be any non-numeric character.
        </kor-text>
    </kor-tooltip>
    <kor-tooltip target="#star-time" position="right">
        <kor-text size="body-2">
            <kor-icon icon="lightbulb" size="s" color="#dd2"></kor-icon>
            Enter 24 in the hours field if an observartion falls on the start of the next day. The date will be adjusted in calculations.<br />
            The separator between hours, minutes and seconds can be any non-numeric character.
        </kor-text>
    </kor-tooltip>
</kor-modal>
    <kor-modal id="form5" icon="content_paste" label="Location fix" height="80%" width="70%">
    <kor-table id="obs-worksheet" condensed style="width: 100%"></kor-table>
    <kor-button id="save-csv" slot="footer" icon="save" tabindex="0">Save worksheet as CSV</kor-button>
    <a id="goto-maps" slot="footer" href="https://maps.google.com/" target="_blank" rel="noopener noreferrer" tabindex="0"><kor-button icon="public">View on Google Maps</kor-button></a>
</kor-modal>
    <kor-modal id="form6" label="Celestial Navigation Challenges" height="80%" width="70%">
    <kor-page style="background-color: rgb(var(--base-3)); overflow: inherit;">
        <kor-tabs id="ch-tabs" slot="left" style="width: fit-content; background-color: rgb(var(--base-1));" orientation="vertical">
            <kor-tab-item id="ch-item-0" label="FTFE" active></kor-tab-item>
            <kor-tab-item id="ch-item-1" label="$100 challenge"></kor-tab-item>
            <kor-tab-item id="ch-item-2" label="$10k challenge"></kor-tab-item>
            <kor-tab-item id="ch-item-3" label="Roohif"></kor-tab-item>
            <kor-tab-item id="ch-item-4" label="Flerf"></kor-tab-item>
            <kor-tab-item id="ch-item-5" label="Tiny Captain"></kor-tab-item>
            <kor-tab-item id="ch-item-6" label="Proto Thad"></kor-tab-item>
            <kor-tab-item id="ch-item-7" label="Hawaii"></kor-tab-item>
        </kor-tabs>
        <kor-card id="ch-tab-0" flex-direction="column" flat style="background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="body-1">
                It is July 18, 1982 and you find yourself lost at sea.<br />
                You only know you are within 1200 miles of Hawaii.<br />
                Your boat is travelling on a heading of 252&deg; at 6.9 knots.<br /><br />
                Your watch's zone description is GMT-7 (UTC = WT + 7).<br />
                The index error and watch error are both zero.<br /><br />
                You take sextant readings of 2 stars from an eye height of 9 feet:<br />
                <kor-table condensed readonly style="width: 50%">
                    <kor-table-row slot="header">
                        <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                        <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                        <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Vega</kor-table-cell>
                        <kor-table-cell head grid-cols="8">47&deg; 22.5'</kor-table-cell>
                        <kor-table-cell head grid-cols="8">22 : 37 : 30</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Alkaid</kor-table-cell>
                        <kor-table-cell head grid-cols="8">59&deg; 14.0'</kor-table-cell>
                        <kor-table-cell head grid-cols="8">22 : 40 : 14</kor-table-cell>
                    </kor-table-row>
                </kor-table>
                <b>Challenge:</b> Find your position as accurately as you can!
            </kor-text>
        </kor-card>
        <kor-card id="ch-tab-1" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="header-2">
                <b>Legal Disclaimer</b><br />
                The text reproduced here is historic in nature, and does not constitute a challenge, contest, or wager of any sort. It is quoted for historical value and context, and no claims for the funds will be entertained.<br />
                A link for the original challenge can be found below.
            </kor-text>
            <kor-text size="body-1">
                Use the elevation angles to three separate stars to determine the observer’s position on the earth.<br />
                Any method relying on the star’s angular measurements may be used.<br />
                Calculations presuming the earth is a globe, flat, or velociraptor shaped may be used.<br />
                Observation method: cellphone<br />
                Date: 2022-03-28<br />
                Eye Height: average 1248.666 feet<br />
                <kor-table condensed readonly style="width: 50%">
                    <kor-table-row slot="header">
                        <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                        <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                        <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Arcturus</kor-table-cell>
                        <kor-table-cell head grid-cols="8">45.7&deg;</kor-table-cell>
                        <kor-table-cell head grid-cols="8">00 : 22 : 33</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Polaris</kor-table-cell>
                        <kor-table-cell head grid-cols="8">45.6&deg;</kor-table-cell>
                        <kor-table-cell head grid-cols="8">00 : 21 : 45</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Procyon</kor-table-cell>
                        <kor-table-cell head grid-cols="8">25.2&deg;</kor-table-cell>
                        <kor-table-cell head grid-cols="8">00 : 19 : 51</kor-table-cell>
                    </kor-table-row>
                </kor-table>
                <b>Challenge:</b> The position of the observer must be determined to be within 25 statute miles.<br />
                The location can be in latitude/longitude or identify the closest town with a population of at least 300.<br />
                <kor-icon icon="warning"></kor-icon>Please note, this challange was solved 4 minutes after it was issued.<br />
                Actual Location: 46&deg; 38' 36.4" N, 93&deg; 22' 31.6" W<br />
            </kor-text>
        </kor-card>
        <kor-card id="ch-tab-2" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="header-2">
                <b>Legal Disclaimer</b><br />
                The text reproduced here is historic in nature, and does not constitute a challenge, contest, or wager of any sort. It is quoted for historical value and context, and no claims for the funds will be entertained.<br />
                A link for the original challenge can be found below.
            </kor-text>
            <kor-text size="body-1">
                Preface:<br />
                Version 2 – 2022-03-24<br />
                Celestial navigation has long been used to obtain one’s position on the earth. Navigators have used celestial navigation for centuries. The foundations of celestial navigation are based on knowing specific information about the earth, a rotating globe, and the stars in the celestial sphere around the globe. Celestial navigation uses measuring devices to obtain the angular differences between features on the earth, stars, planets, the sun, or the moon. A common measuring instrument is a Sextant. Using a sextant is so common that the term “using a sextant” is somewhat synonymous with celestial navigation.
                <br />
                Flat earthers (see definition below) often claim that “a sextant can only work on a flat plane” and other variations of this claim. This implies that all usages of sextants to perform celestial navigation have never worked using mathematics applied presuming the earth to be a globe and that celestial navigation can only work using mathematics applied presuming flat earth (as defined below).
                <br />
                Definitions:<br />
                Flat earth: the idea that the earth as a whole, excluding topography, is generally a flat plane. This includes these ideas: the earth is an infinite plane, all horizontals are parallel, the surface of undisturbed water is flat, and other ideas that have similar implications.
                <br />
                Flat plane: see definition for “flat earth”.
                <br />
                Flat earther: a person that posits Flat Earth idea as defined above.
                <br />
                <b>Challenge:</b><br />
                Using only mathematics applied presuming flat earth (as defined above), use the elevation angles to three separate stars to determine the observer’s position on the earth. Twice.
                <br />
                In the event that the method accurately identifies the position of the first observer within the acceptance parameters, a second set of elevation angles to three separate stars will be published and the submitter shall use the exact same celestial navigation method to determine the location of the second observer. This will be submitted using the same submission method as the first measurement.
                <br />
                If a different celestial navigation method is used for the second elevation angles to three separate stars, the submission will be invalidated.
                <br />
                Acceptance parameters:<br />
                The position of the observer must be determined to be within 25 statute miles for both sets of elevation angles to three separate stars. The location can be in latitude/longitude, street address, or a relative distance and bearing to a landmark.
                <br />
                The exact method used to determine the position must be included in the submission. All details used must be provided so that a third party can perform the same steps to get the position. This method will be tested independently of the submitter’s answer to verify the same answer is obtained. If a different answer is obtained, the submission will be invalidated. If the method is not sufficiently described to perform calculations, the submission will be invalidated.
                <br />
                The method must use only mathematics and data that presumes flat earth (as defined above). Any methods or information presuming the earth to be a globe, or derived from a globe, invalidates the submission. This includes maps, sight reduction tables, dip charts, refraction charts, and calculations of distances over the surface of the earth.
                <br />
                One exemption is allowed which differs from version 1 of this challenge. Even though the star charts place the stars in a concentric sphere around the spherical earth, existing star charts as published in nautical almanacs may be used for the challenge. The specific method used to transform this spherical data to a flat earth (as defined above) plane must be described in detail sufficient to be applied independently during the validation of a submission.
                <br />
                The method must include derivations or citations to the derivations of any numerical constants used in any formulas or calculations.
                <br />
                The method must only use the known and documented behavior of light propagation. Unexplained or arbitrary treatment in the path of light taken from the star to the observer will disqualify a submission.
                <br />
                Submission method:<br />
                Any combination of the following methods are acceptable:<br />
                -YouTube Video<br />
                -Web page hosted on your server<br />
                -Email submissions to mctoon@mctoon.net, entries submitted this way will be posted in their entirety on mctoon.net website or via video on MCToon’s YouTube channel.<br />
                -Posting on a publicly accessible place on the internet
                <br />
                If there are multiple published submissions, the submitter must identify a single method as the authoritative method. The authoritative method shall be the only method evaluated when judging the challenge.
                <br />
                Submission communication method:
                A notification of the submission must be sent via email to mctoon@mctoon.net. A confirmation of receipt via email will be sent back to the submitter. The submission is not complete until a confirmation of receipt has been received via email to the submitter.
                <br />
                Prize: $0, ZERO DOLLARS from me, go and email your solution to MCToon.<br />
                <br />
                Observation date: November 15, 2018<br />
                Instrument used: sextant<br />
                Method: angle between star and horizon<br />
                Eye Height: 2 meters<br />
                Index Error: +0.3′<br />
                True Bearing: 0°<br />
                Speed: 12 knots<br />
                Temperature: 12&deg;C<br />
                Barometric Pressure: 975 millibars<br />
                Watch's Timezone: GMT+0
                <kor-table condensed readonly style="width: 50%">
                    <kor-table-row slot="header">
                        <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                        <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                        <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Regulus</kor-table-cell>
                        <kor-table-cell head grid-cols="8">70&deg; 48.7'</kor-table-cell>
                        <kor-table-cell head grid-cols="8">8 : 28 : 15</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Arcturus</kor-table-cell>
                        <kor-table-cell head grid-cols="8">27&deg; 9.0'</kor-table-cell>
                        <kor-table-cell head grid-cols="8">8 : 30 : 30</kor-table-cell>
                    </kor-table-row>
                    <kor-table-row>
                        <kor-table-cell head grid-cols="8">Dubhe</kor-table-cell>
                        <kor-table-cell head grid-cols="8">55&deg; 18.4'</kor-table-cell>
                        <kor-table-cell head grid-cols="8">8 : 32 : 15</kor-table-cell>
                    </kor-table-row>
                </kor-table>
            </kor-text>
        </kor-card>
        <kor-card id="ch-tab-3" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="body-1">
                You've secured work on a ship, and in your application you wrote that you're skilled in celestial navigation.<br />
                You've been at sea for a while and there has been a storm for a few days.<br />
                The electronics were damaged in the storm and the ship's location is unknown.<br />
                The captain remembered your application so he's handed you a sextant and asked you to get their position.<br />
                Nothing matters other than getting the accurate fix. Lifes are on the line.<br />
                Get it wrong, get lost at sea and you die.<br />
            </kor-text>
            Date: Thu, 14 Jul 2022 GMT+0<br />
            Eye height: 32 meter<br />
            Index error: 2'<br />
            <kor-table condensed readonly style="width: 50%">
                <kor-table-row slot="header">
                    <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Achernar</kor-table-cell>
                    <kor-table-cell head grid-cols="8">63&deg; 17.1'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">05 : 48 : 12</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Betelgeuse</kor-table-cell>
                    <kor-table-cell head grid-cols="8">22&deg; 5.0'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">05 : 30 : 42</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Canopus</kor-table-cell>
                    <kor-table-cell head grid-cols="8">38&deg; 56.0'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">05 : 31 : 48</kor-table-cell>
                </kor-table-row>
            </kor-table>
            <b>Challenge:</b> Find your position as accurately as you can!<br />
            Actual location: -31.154076, 15.503133<br />
        </kor-card>
        <kor-card id="ch-tab-4" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="body-1">
                You've secured work on a ship, and in your application you wrote that you're skilled in celestial navigation.<br />
                You've been at sea for a while and there has been a storm for a few days.<br />
                The electronics were damaged in the storm and the ship's location is unknown.<br />
                The captain remembered your application so he's handed you a sextant and asked you to get their position.<br />
                Nothing matters other than getting the accurate fix. Lifes are on the line.<br />
                Get it wrong, get lost at sea and you die.<br />
            </kor-text>
            Date: Wed, 13 Jul 2022 GMT+0<br />
            Eye height: 32 meter<br />
            Index error: 2′<br />
            <kor-table condensed readonly style="width: 50%">
                <kor-table-row slot="header">
                    <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Atria</kor-table-cell>
                    <kor-table-cell head grid-cols="8">16&deg; 2.1'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">11 : 40 : 33</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Canopus</kor-table-cell>
                    <kor-table-cell head grid-cols="8">40&deg; 8.4'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">11 : 23 : 03</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Rigel</kor-table-cell>
                    <kor-table-cell head grid-cols="8">39&deg; 18.0′</kor-table-cell>
                    <kor-table-cell head grid-cols="8">11 : 24 : 09</kor-table-cell>
                </kor-table-row>
            </kor-table>
            <b>Challenge:</b> Find your position as accurately as you can!<br />
            Actual location: -32.965812, -71.665188<br />
        </kor-card>
        <kor-card id="ch-tab-5" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="body-1">
                Date: 2003-03-17<br />
                Timezone: GMT+3<br />
                Observer Height: 9 feet<br />
                Heading: 327&deg;<br />
                Speed: 13.6 knots<br />
                Index Error: -2'<br />
            </kor-text>
            <kor-table condensed readonly style="width: 50%">
                <kor-table-row slot="header">
                    <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Regulus</kor-table-cell>
                    <kor-table-cell head grid-cols="8">33&deg; 58.2'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">19 : 08 : 15</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Capella</kor-table-cell>
                    <kor-table-cell head grid-cols="8">63&deg; 45.0'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">19 : 14 : 41</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Aldebaran</kor-table-cell>
                    <kor-table-cell head grid-cols="8">63&deg; 53.5'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">19 : 16 : 31</kor-table-cell>
                </kor-table-row>
            </kor-table>
            <b>Challenge:</b> Find your position as accurately as you can!<br />
        </kor-card>
        <kor-card id="ch-tab-6" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="body-1">
                Date: 2022-10-01<br />
                Timezone: GMT+0<br />
                Eye height: 9 feet<br />
                Index error: 0'<br />
            </kor-text>
            <kor-table condensed readonly style="width: 50%">
                <kor-table-row slot="header">
                    <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Schedar</kor-table-cell>
                    <kor-table-cell head grid-cols="8">39&deg; 36.2'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">0:33:24</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Altair</kor-table-cell>
                    <kor-table-cell head grid-cols="8">55&deg; 33.8'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">0:34:49</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Saturn</kor-table-cell>
                    <kor-table-cell head grid-cols="8">24&deg; 7'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">0:32:02</kor-table-cell>
                </kor-table-row>
            </kor-table>
            <b>Challenge:</b> Find your position as accurately as you can!<br />
            Actual location: 42&deg; 46.9' N, 87&deg; 45.5' W
        </kor-card>
        <kor-card id="ch-tab-7" flex-direction="column" flat style="display:none; background-color: rgb(var(--base-3)); overflow-y: scroll;">
            <kor-text size="header-1">
                Hawaii by sextant
            </kor-text>
            <kor-text size="body-1">
                Date: 1982-07-16<br />
                Timezone: GMT-7<br />
                Ded. reckoning lat: 28&deg; 33' N<br />
                Ded. reckoning lon: 142&deg; 41' W<br />
                Heading: 0&deg;<br />
                Speed: 0 knots<br />
                Index error: 0'<br />
                Watch error: 0 sec<br />
                Eye height: 9 feet<br />
                Temperature: 10 &deg;C<br />
                Pressure: 1010 mbar<br />
            </kor-text>
            <kor-table condensed readonly style="width: 50%">
                <kor-table-row slot="header">
                    <kor-table-cell head grid-cols="8">Star</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Sextant reading</kor-table-cell>
                    <kor-table-cell head grid-cols="8">Time</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Deneb</kor-table-cell>
                    <kor-table-cell head grid-cols="8">47&deg; 23'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">6 : 55 : 50</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Venus</kor-table-cell>
                    <kor-table-cell head grid-cols="8">15&deg; 56'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">6 : 58 : 30</kor-table-cell>
                </kor-table-row>
                <kor-table-row>
                    <kor-table-cell head grid-cols="8">Moon LL</kor-table-cell>
                    <kor-table-cell head grid-cols="8">42&deg; 6.8'</kor-table-cell>
                    <kor-table-cell head grid-cols="8">7 : 14 : 25</kor-table-cell>
                </kor-table-row>
            </kor-table>
            <b>Challenge:</b> Find your position as accurately as you can!<br />
            Actual location: 28&deg; 32' N, 142&deg; 39.6' W
        </kor-card>
    </kor-page>
    <kor-card id="ch-btns-0" slot="footer" flex-direction="row" flat>
        <a href="https://youtu.be/g27P_vaARvo?t=1584" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-0">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-1" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://mctoon.net/global-navigation-challenge/" target="_blank" rel="noopener noreferrer">
            <kor-button>Original challenge</kor-button>
        </a>
        <a href="https://youtu.be/iB8xlWNhsn0" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-1">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-2" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://mctoon.net/10ksextantv2/" target="_blank" rel="noopener noreferrer">
            <kor-button>Original challenge</kor-button>
        </a>
        <a href="https://youtu.be/3rS4pdCs1gw" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-2">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-3" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://mctoon.net/celnav/" target="_blank" rel="noopener noreferrer">
            <kor-button>Original challenge</kor-button>
        </a>
        <a href="https://youtu.be/RhuK0JImZf8?t=277" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-3">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-4" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://mctoon.net/celnav/" target="_blank" rel="noopener noreferrer">
            <kor-button>Original challenge</kor-button>
        </a>
        <a href="https://youtu.be/RhuK0JImZf8?t=1842" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-4">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-5" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://youtu.be/tdmaLeXGBGk?t=517" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-5">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-6" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://youtu.be/ykRb5Ku225U?t=881" target="_blank" rel="noopener noreferrer">
            <kor-button icon="ondemand_video">watch on YouTube</kor-button>
        </a>
        <kor-button id="getfix-6">Get location fix</kor-button>
    </kor-card>
    <kor-card id="ch-btns-7" slot="footer" flex-direction="row" flat style="display:none;">
        <a href="https://davidburchnavigation.blogspot.com/2014/05/hawaii-by-sextant-overview-of-celestial.html" target="_blank" rel="noopener noreferrer">
            <kor-button icon="auto_stories">David Burch Navigation Blog</kor-button>
        </a>
        <kor-button id="getfix-7">Get location fix</kor-button>
    </kor-card>
</kor-modal>
    <kor-modal id="form7" label="About this application" height="80%" width="60%" style="font-size: large;">
    <kor-tabs id="hlp-tabs" slot="header" style="width: fit-content;">
        <kor-tab-item id="hlp-item-0" label="Squiggly Math" active></kor-tab-item>
        <kor-tab-item id="hlp-item-1" label="Special Thanks"></kor-tab-item>
        <kor-tab-item id="hlp-item-2" label="Software Components"></kor-tab-item>
        <kor-tab-item id="hlp-item-3" label="Legal Disclaimer"></kor-tab-item>
    </kor-tabs>
    <kor-card id="hlp-tab-0" flex-direction="column" flat style="overflow: inherit;">
        <kor-text size="body-1">
            These are the equations used in this software. The list goes through the calculation steps, and explains how certain values should be entered in the input fields.
        </kor-text>
        <kor-text size="header-1"><kor-icon icon="visibility"></kor-icon>Sight reduction</kor-text>
        <kor-text size="body-1">
            <b>H<sub>s</sub></b>: sextant altitude<br />
            The input field for this value is divided into degrees, arc minutes and arc seconds, but also accepts decimal values for every field.<br />
            Any non-numeric character can be used as separator. For example the string entered as <b>45d 12.3m</b> will be reformatted to <b>45&deg; 12.3' 00"</b>, and it will be converted to decimal degrees internally.<br />
            <b>IE</b>: Index error OFF the arc<br />
            The value entered will be added to the sextant altitude. If the error is ON the arc, a negative value should be entered.<br />
            <b>r</b>: radius of Earth in meters<br />
            <b>h</b>: observer height in meters<br />
            <b>p</b>: pressure in millibar<br />
            <b>T</b>: temperature in Celsius<br />
            <b>Dip</b>: dip correction<br />
            The method of measurement should also be selected, since it effects dip correction.<br />
            Measurements taken with a sextant will be corrected for horizon dip.<br />
            Measurements taken with an artificial horizon will be divided by 2 and no dip correction will be applied.<br />
            Measurements taken with a cellphone will not be corrected for dip since the cellphone measures the angle against the tangential plane to the local gravity vector.<br />
            Measurements taken with a theodolite will not be corrected for dip, but because surveyors measure angles from the zenith, the measured angle will be subtracted from 90&deg;.<br />
            <script type="math/tex; mode=display">Dip~[ \degree ] = arc~cos \left( {\left( 1 + \frac{h}{1.2 \cdot r}  \right)} ^{-1} \right)</script><br />
            <b>H<sub>a</sub></b>: apparent altitude<br />
            for horizon measurements:<br />
            <script type="math/tex; mode=display">H_a = H_s + IE - Dip</script><br />
            for artificial horizon measurements:<br />
            <script type="math/tex; mode=display">H_a = \frac{H_s + IE}{2}</script><br />
            <b>f</b>: Refraction coefficient
            <script type="math/tex; mode=display">f = \frac{ p }{ 1010} \cdot \frac{283.15}{273.15 + T}</script><br />
            <b>R<sub>0</sub></b>: standard refraction at 1010 mbar and 10 &deg;C<br />
            <script type="math/tex; mode=display">R_0~['] = { \left( tan \left( H_a + \frac{7.31}{H_a + 4.4} \right) \right) }^{-1}</script><br />
            <b>R</b>: refraction
            <script type="math/tex; mode=display">R~[ \degree ] = f \cdot R_0 \cdot 60</script><br />
            <b>H<sub>r</sub></b>: altitude corrected for refraction<br />
            <script type="math/tex; mode=display">H_r = H_a - R</script><br />
            <b>SD</b>: semidiameter (added for lower limb sights and subtracted for upper limb sights)<br />
            <b>H<sub>d</sub></b>: altitude corrected for semidiameter<br />
            <script type="math/tex; mode=display">H_d = H_r \pm SD</script><br />
            <b>HP</b>: parallax coefficient for Mars, Venus, Moon or Sun<br />
            <b>P</b>: parallax<br />
            <script type="math/tex; mode=display">P = HP \cdot cos(H_d)</script><br />
            <b>H<sub>o</sub></b>: observed (true) altitude<br />
            <script type="math/tex; mode=display">H_o = H_D + P</script><br />
        </kor-text>
        <kor-text size="header-1"><kor-icon icon="watch"></kor-icon>Date and time</kor-text>
        <kor-text size="body-1">
            <b>D</b>: date in local time zone<br />
            <b>WT</b>: watch time in local time zone<br />
            <b>z</b>: time zone difference in hours<br />
            Eastern timezones are represented as GMT+z, the z value will be subtracted<br />
            Western timezones are represented as GMT-z, the z value will be added<br />
            If observations are taken around midnight, 24 can be entered in the <i>hours</i> field if an observation falls on the start of the next day. The UTC date will be automatically corrected internally.
            <b>WE</b>: watch error in seconds<br />
            positive if watch is behind current time<br />
            negative if watch is ahead current time<br />
            <b>UT</b>: date and time in UTC timezone (a.k.a. GMT+0)
            <script type="math/tex; mode=display">UT = D + WT - z + WE</script>
        </kor-text>
        <kor-text size="header-1"><kor-icon icon=""></kor-icon>Geographic positions</kor-text>
        <kor-text size="body-1">
            <b>GHA<sub>H</sub></b>: Greenwich hour angle of the observed body at the whole hour<br />
            <b>GHA<sub>Aries</sub></b>: Greenwich hour angle of the celestial meridian at the whole hour<br />
            <b>GHA<sub>i</sub></b>: increment of GHA for the minutes and seconds of observation, depends on the ovserved body<br />
            <b>SHA</b>: Sidereal hour angle of a star (not applicable for the Sun, Moon and planets)<br />
            <b>v</b>: coefficient for velocity from the daily pages<br />
            <b>v correction</b>: “The change in hour angle arising from velocity of the body at the time of the sight observation is accounted
            for with the v correction.” Source- <a href="https://thenauticalalmanac.com/2019_Bowditch-_American_Practical_Navigator.html" target="_blank" rel="noopener noreferrer">Bowditch 2017</a>, Chapter 19- Sight Reduction p. 313. The planet’s v is positive
            unless preceeded by a minus sign which is sometimes the case with Venus. The sign of the Moon’s v is positive.<br />
            The correction values are calculated with the following formula:<br />
            <script type="math/tex; mode=display">v_{corr}~[\degree] = v \cdot (UT_{minutes} + 0.5)</script>
            corrected GHA for the Sun:<br />
            <script type="math/tex; mode=display">GHA = GHA_H + GHA_i</script>
            corrected GHA for the Moon and planets:<br />
            <script type="math/tex; mode=display">GHA = GHA_H + GHA_i + v_{corr}</script>
            corrected GHA for the stars:<br />
            <script type="math/tex; mode=display">GHA = GHA_{Aries} + GHA_i + SHA</script>
            <b>DEC</b>: Declination measured from the celestial equator<br />
            <b>d</b>: coefficient for declination from the daily pages (not applicable for stars)<br />
            <b>d correction</b>: “The change in declination of the body at the time of the sight observation is accounted for with the d
            correction.” Source- <a href="https://thenauticalalmanac.com/2019_Bowditch-_American_Practical_Navigator.html" target="_blank" rel="noopener noreferrer"></a>Bowditch 2017</a>, Chapter 19- Sight Reduction p. 313. The sign of the Moon or planet’s d
            correction is determined by the declination trend- positive if successive declination values increase and negative if they decrease.<br />
            The correction values are calculated with the following formula:<br />
            <script type="math/tex; mode=display">d_{corr}~[\degree] = d \cdot (UT_{minutes} + 0.5)</script>
            <b>DEC<sub>corrected</sub></b>:
            <script type="math/tex; mode=display">DEC_{corr} = DEC + d_{corr}</script>
            <b>GP</b>: Geographic position on Earth where the observed body is directly at the zenith<br />
            Declination corresponds to latitude on Earth.<br />
            GHA corresponds to longitude, but GHA is measured from the celestial meridian (Constellation of Aries) towards west in the [0&deg;, 360&deg;] interval, while
            latitude is measured from the Greenwich meridian towards East, in the [-180&deg;, 180&deg;] interval.<br />
            In the measurements form the geographic position of a landmark can also be added, with the estimated distance from this landmark.<br />
            The distance will be converted to an altitude angle to draw a circle. Only the intersection points falling inside this circle will be used to calculate the location fix. Useful if there is only two star sights to work with.<br />
            <script type="math/tex; mode=display">H_a = 90\degree - \frac{distance}{r_{Earth}}</script>
        </kor-text>
        <kor-text size="header-1"><kor-icon icon=""></kor-icon>Location fix</kor-text>
        <kor-text size="body-1">
            Once the geographic position of a celestial body and the altitude angle is calculated, circles of equal altitude can be drawn on the surface of the Earth.<br />
            These circles are the locations from where each observer sees a certain celestial body at the same angle.<br />
            For each pair of circles, the coordinates of the intersection point are determined, using <a href="https://sites.google.com/site/navigationalalgorithms/Home/papersnavigation" target="_blank" rel="noopener noreferrer">A. González's method.</a><br />
            The GP vectors are projected to a unit sphere, and the spherical coordinates are converted to cartesian coordinates.<br />
            <script type="math/tex; mode=display">\begin{bmatrix} x \\ y \\ z \end{bmatrix} = \begin{bmatrix} cos(lat) \cdot cos(lon) \\ cos(lat) \cdot sin(lon) \\ sin(lat) \end{bmatrix}</script>
            This same formula can be use to convert celestial coordinates too, with the substitution of <i>lat = declination</i> and <i>lon = -GHA</i>.<br />
            The cosine of the angle between two GP vectors can be computed with the dot product, utilising the fact that the vectors are both one unit long.<br />
            <script type="math/tex; mode=display">cos~\alpha = \overrightharpoon{GP_1} \bullet \overrightharpoon{GP_2}</script>
            A trigonometric identity gives the squared sine of the angle, which will be used in later formulas.<br />
            <script type="math/tex; mode=display">sin^2~\alpha = 1 - cos^2~\alpha</script>
            The central point of the intersection of two circles can be calculated with the following formula:<br />
            <script type="math/tex; mode=display">k_1 = \frac{sin(H_{o1}) - sin(H_{o2}) cos~\alpha} {sin^2~\alpha}</script>
            <script type="math/tex; mode=display">k_2 = \frac{sin(H_{o2}) - sin(H_{o1}) cos~\alpha} {sin^2~\alpha}</script>
            <script type="math/tex; mode=display">\overrightharpoon{C} = k_1~ \overrightharpoon{GP_1} + k_2~ \overrightharpoon{GP_2}</script>
            The cross product of the two GP vectors gives a direction pointing towards one of the intersection points. This will be scaled down to unit length in the last formula.<br />
            <script type="math/tex; mode=display">\overrightharpoon{X} = \overrightharpoon{GP_1} \times \overrightharpoon{GP_2}</script>
            Using the direction vector and its inverse, the two intersection points can be obtained.<br />
            <script type="math/tex; mode=display">\overrightharpoon{IP_{1,2}} = \overrightharpoon{C} \pm \overrightharpoon{X} \sqrt{\frac{1 - \overrightharpoon{C} \bullet \overrightharpoon{C}}{ \overrightharpoon{X} \bullet \overrightharpoon{X}}}</script>
            <br />
            Next, for each pair of intersection points, their distance is computed using the Haversine formula.<br />
            The "crooked hat" is formed with the three points that are closest to eachother, within the distance of a landmark if it's given.<br />
            The average of these three points gives the approximate location fix. This is a rather imprecise approximation, so don't rely on this, or don't get surprised when you're lost at sea and sharks bite your arse off.<br />
        </kor-text>
    </kor-card>
    <kor-card id="hlp-tab-1" flex-direction="column" flat style="display:none; overflow: inherit;">
        <kor-text size="header-1">Special thanks to the following individuals:</kor-text>
        <ul>
            <li><b>MCToon</b> - for creating the celestial navigation challenges</li>
            <li><b>FTFE</b> and <b>Roohif</b> - for demonstrating how it works on a globe</li>
            <li><b>Tiny Captain</b> and <b>Proto Thad</b> - for giving me advice on celestial navigation</li>
            <li>All the <b>Flerfs</b> who aggravated me so I started to write this software</li>
        </ul>
    </kor-card>
    <kor-card id="hlp-tab-2" flex-direction="column" flat style="display:none; overflow: inherit;">
        <kor-text size="header-1">Libraries used in this software</kor-text>
        <a href="https://rhodesmill.org/skyfield/" target="_blank" rel="noopener noreferrer">skyfield</a>
        <a href="https://github.com/aendie/SFalmanac-Py3" target="_blank" rel="noopener noreferrer">SFalmanac-Py3</a>
        <a href="https://pyscript.net/" target="_blank" rel="noopener noreferrer">pyscript</a>
        <a href="https://opencpn.org/wiki/dokuwiki/lib/exe/fetch.php?media=opencpn:plugins:celestial_navigation:vector2cop.pdf" target="_blank" rel="noopener noreferrer">opencpn - vector2cop plugin</a>
        <a href="https://threejs.org/" target="_blank" rel="noopener noreferrer">THREE.js</a>
        <a href="https://kor-ui.com/" target="_blank" rel="noopener noreferrer">kor-ui</a>
        <a href="https://lit.dev/" target="_blank" rel="noopener noreferrer">lit</a>
        <a href="https://katex.org/" target="_blank" rel="noopener noreferrer">katex</a>
    </kor-card>
    <kor-card id="hlp-tab-3" flex-direction="column" flat style="display:none; overflow: inherit;">
        <kor-text size="header-1">
            This program is free software: you can redistribute it and/or modify
            it under the terms of the GNU General Public License as published by
            the Free Software Foundation, either version 3 of the License, or
            (at your option) any later version.
        </kor-text>
        <kor-text size="header-1">
            This program is distributed in the hope that it will be useful,
            but WITHOUT ANY WARRANTY; without even the implied warranty of
            MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
            GNU General Public License for more details.
        </kor-text>
        <kor-text size="header-1">
            THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS
            OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
            CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
            DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; INJURY OR LOSS OF LIFE;
            LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
            LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
            ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
        </kor-text>
    </kor-card>
</kor-modal>
    <!--
        "interpreters": [{
            "src": "./pyodide/pyodide.js",
            "name": "pyodide-0.23.2",
            "lang": "python"
        }],
-->
<py-config type="json">
    {
        "splashscreen": { "autoclose": false },
        "fetch": [{ 
            "from": "almanac", 
            "to_folder": "almanac", 
            "files": [ 
                "Hipparcos.csv", 
                "finals2000A.all", 
                "de421.bsp", 
                "almanac.py" 
            ]
        }],
        "packages": [ 
            "certifi==2022.12.7", 
            "numpy==1.24.2", 
            "./pyscript/sgp4-2.21-py3-none-any.whl", 
            "./pyscript/jplephem-2.18-py3-none-any.whl", 
            "./pyscript/skyfield-1.45-py3-none-any.whl" 
        ] 
    }
</py-config>
<py-script>
    from pathlib import Path
    Path('almanac/__init__.py').touch()
    from pyodide.ffi import create_proxy, to_js
    from js import window, console, Object
    from almanac.almanac import *
    if not window.hasOwnProperty('main'):
        console.error('Function "window.main" does not exist!')
    else:
        alma = to_js({
                "utc_date"      : create_proxy(lambda day, time, zone: to_js(utc_date(day.y, day.m, day.d, time.h, time.m, time.s, zone), dict_converter=Object.fromEntries)),
                "vd_corr"       : create_proxy(lambda m, vd: to_js(vd_corr(m, vd))),
                "gha_increment" : create_proxy(lambda body, min, sec: to_js(gha_increment(body, min, sec))),
                "planets"       : create_proxy(lambda: to_js(planets())),
                "sunmoon"       : create_proxy(lambda: to_js(sunmoon())),
                "stars"         : create_proxy(lambda: to_js(stars())),
                "almanac_page"  : create_proxy(lambda y, m, d: to_js(almanac(y, m, d))),
                "parallax"      : create_proxy(lambda hp, altitude: to_js(parallax(hp, altitude))),
            }, dict_converter=Object.fromEntries)
        window.setTimeout(create_proxy(lambda: window.main(alma)), 0)
        pass
</py-script>
    
    
    
    
    
    <script defer src="/pyscript/pyscript.js" type="module"></script>
  </div>
</body>

</html>
